<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper     
PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN"
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">


<mapper namespace="GeneID2GoInfo">
	<resultMap id="geneDetailMap" type="Gene2GoInfo">
		<id property="geneID" column="GeneID" />
		<result property="taxID" column="TaxID"/>
		<result property="geneID" column="GeneID"/>
		<result property="quaryID" column="accessID"/>
		<result property="dbInfo" column="DataBaseInfo"/>
		<association property="geneInfo" column="GeneID" javaType="GeneInfo" select="selectGeneInfo" />
		<collection property="lsGOInfo" javaType="ArrayList" ofType="Gene2Go" column="GeneID" select="selectGene2Go" />
	</resultMap>
	<resultMap id="geneInfoMap" type="GeneInfo">
		<id property="geneID" column="GeneID" />
		<result property="symbol" column="Symbol"/>
		<result property="synonyms" column="Synonyms"/>
		<result property="symNome" column="SymbolFromNomenclature"/>
		<result property="fullNameNome" column="FullNameFromNomenclature"/>
		<result property="otherDesign" column="OtherDesignations"/>
		<result property="description" column="description"/>
		<result property="typeOfGene" column="typeOfGene"/>
		<result property="modDate" column="ModificationDate"/>
		<result property="nomStat" column="NomenclatureStatus"/>
		<result property="modDate" column="ModificationDate"/>
	</resultMap>
	<resultMap id="gene2GOMap" type="Gene2Go">
		<id property="geneID" column="GeneID" />
		<result property="geneID" column="GeneID"/>
		<result property="GOID" column="GOID"/>
		<result property="evidence" column="Evidence"/>
		<result property="qualifier" column="Qualifier"/>
		<result property="GOTerm" column="GOTerm"/>
		<result property="reference" column="Reference"/>
		<result property="function" column="GoFunction"/>
		<result property="dataBase" column="DataBaseInfo"/>
	</resultMap>
	<select id="selectGeneDetail" parameterType="NCBIID" resultMap="geneDetailMap">
		select TaxID,GeneID,accessID,DataBaseInfo
		from NCBIID 
		<where>
			<if test="accessID !=null">
				and accessID=#{accessID}
			</if>
			<if test="taxID !=null and taxID !=0">
				and TaxID=#{taxID}
			</if>
			<if test="geneID!=null and geneID !=0">
				and GeneID=#{geneID}
			</if>
		</where> 
	</select>
	<select id="selectGeneInfo" parameterType="long" resultMap="geneInfoMap">
		select *
		from geneInfo
		where GeneID=#{id}	
	</select>
	<select id="selectGene2Go" parameterType="long" resultMap="gene2GOMap">
		select
		gene2go.GeneID as GeneID,
		Go2Term.GOID as GOID,
		gene2go.Evidence as Evidence,
		gene2go.Qualifier as Qualifier,
		Go2Term.GOTerm as GOTerm,
		gene2go.Reference as Reference,
		Go2Term.GoFunction as GoFunction,
		gene2go.DataBaseInfo as DataBaseInfo
		from gene2go
		join Go2Term
		on gene2go.GOID=Go2Term.GoIDquery
		where gene2go.GeneID=#{id}
	</select>
	
	
	
	
	
	
	
	
	
	
	
	
	<resultMap id="uniProtDetailMap" type="Uni2GoInfo">
		<id property="uniID" column="UniID" />
		<result property="taxID" column="TaxID"/>
		<result property="uniID" column="UniID"/>
		<result property="quaryID" column="accessID"/>
		<result property="dbInfo" column="DataBaseInfo"/>
		<association property="uniGeneInfo" column="UniID" javaType="UniGeneInfo" select="selectUniGeneInfo" />
		<collection property="lsUniGOInfo" javaType="ArrayList" ofType="UniGene2Go" column="UniID" select="selectUniGene2Go" />
	</resultMap>
	<resultMap id="uniGeneInfoMap" type="UniGeneInfo">
		<id property="uniProtID" column="UniprotID" />
		<result property="symbol" column="Symbol"/>
		<result property="synonyms" column="Synonyms"/>
		<result property="symNome" column="SymbolFromNomenclature"/>
		<result property="fullNameNome" column="FullNameFromNomenclature"/>
		<result property="otherDesign" column="OtherDesignations"/>
		<result property="description" column="description"/>
		<result property="typeOfGene" column="typeOfGene"/>
		<result property="modDate" column="ModificationDate"/>
		<result property="nomStat" column="NomenclatureStatus"/>
		<result property="modDate" column="ModificationDate"/>
	</resultMap>
	<resultMap id="uniGene2GOMap" type="UniGene2Go">
		<id property="uniProtID" column="uniProtID" />
		<result property="uniProtID" column="uniProtID"/>
		<result property="GOID" column="GOID"/>
		<result property="evidence" column="Evidence"/>
		<result property="qualifier" column="Qualifier"/>
		<result property="GOTerm" column="GOTerm"/>
		<result property="reference" column="Reference"/>
		<result property="function" column="GoFunction"/>
		<result property="dataBase" column="DataBaseInfo"/>
	</resultMap>
	<select id="selectUniGeneDetail" parameterType="UniProtID" resultMap="uniProtDetailMap">
		select *
		from UniProtID 
		<where>
			<if test="accessID !=null">
				and accessID=#{accessID}
			</if>
			<if test="taxID !=null and taxID !=0">
				and TaxID=#{taxID}
			</if>
			<if test="uniID!=null">
				and UniID=#{uniID}
			</if>
		</where> 
	</select>
	<select id="selectUniGeneInfo" parameterType="string" resultMap="uniGeneInfoMap">
		select *
		from UniGeneInfo
		where UniProtID=#{uniID}
	</select>
		<select id="selectUniGene2Go" parameterType="string" resultMap="uniGene2GOMap">
			select
			UniGene2Go.UniProtID as UniProtID,
			Go2Term.GOID as GOID,
			UniGene2Go.Evidence as Evidence,
			UniGene2Go.Qualifier as Qualifier,
			Go2Term.GOTerm as GOTerm,
			UniGene2Go.Reference as Reference,
			Go2Term.GoFunction as GoFunction,
			UniGene2Go.DataBaseInfo as DataBaseInfo
			from UniGene2Go
			join Go2Term
			on UniGene2Go.GOID=Go2Term.GoIDquery
			where UniGene2Go.UniProtID=#{id}	
	</select>
</mapper>
 